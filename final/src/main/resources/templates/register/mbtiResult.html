<!DOCTYPE html>
<html>
    <head>
      <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
      <script defer src="https://pyscript.net/latest/pyscript.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.js"
	crossorigin="anonymous"></script>
      <py-config type="json">
        {
          "packages": ["numpy", "matplotlib","pandas"]
        }
      </py-config>
    </head>

  <body>
    <h1>검사 결과</h1>
    <div id="plot"></div>
    <button type="button" class="btn mt-4" onclick="goBack();">확인</button>
        <script>
     	first = window.sessionStorage.getItem('first');
     	two = window.sessionStorage.getItem('two');
     	three = window.sessionStorage.getItem('three');
     	four = window.sessionStorage.getItem('four');
     	five = window.sessionStorage.getItem('five');
     	six = window.sessionStorage.getItem('six');
     	seven = window.sessionStorage.getItem('seven');
     	eight = window.sessionStorage.getItem('eight');       	
     	nine = window.sessionStorage.getItem('nine');       	
     	ten = window.sessionStorage.getItem('ten');       	
     	eleven = window.sessionStorage.getItem('eleven');       	
     	twelve = window.sessionStorage.getItem('twelve');       	
     	thirteen = window.sessionStorage.getItem('thirteen');       	
     	fourteen = window.sessionStorage.getItem('fourteen');       	
     	fifteen = window.sessionStorage.getItem('fifteen');       	
     	sixteen = window.sessionStorage.getItem('sixteen');       	
     	seventeen = window.sessionStorage.getItem('seventeen');       	
     	eightteen = window.sessionStorage.getItem('eightteen');       	
     	nineteen = window.sessionStorage.getItem('nineteen');       	
     	twenty = window.sessionStorage.getItem('twenty');       	
     	twenty_one = window.sessionStorage.getItem('twenty_one');       	
     	twenty_two = window.sessionStorage.getItem('twenty_two');       	
     	twenty_three = window.sessionStorage.getItem('twenty_three');       	
     	twenty_four = window.sessionStorage.getItem('twenty_four');       	
     	twenty_five = window.sessionStorage.getItem('twenty_five');       	
     	twenty_six = window.sessionStorage.getItem('twenty_six');       	
     	twenty_seven = window.sessionStorage.getItem('twenty_seven');       	
     	twenty_eight = window.sessionStorage.getItem('twenty_eight');       	    	
     	master_piece = window.sessionStorage.getItem("master_piece");
    </script>
    <py-script output="plot">
from js import first,two,three,four,five,six,seven,eight,nine,ten,eleven,twelve,thirteen,fourteen,fifteen,sixteen,seventeen,eightteen,nineteen,twenty,twenty_one,twenty_two,twenty_three,twenty_four,twenty_five,twenty_six,twenty_seven,twenty_eight,master_piece,console

console.log(first)
console.log(two)
console.log(master_piece);
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

fig=plt.figure()
df = pd.DataFrame({'MBTI' :['E&I','S&N','T&F','J&P'],'A' : [int(first)*10,int(two)*10,int(three)*10,int(four)*10,int(five)*10,int(six)*10,int(seven)*10,int(eight)*10,int(nine)*10,int(ten)*10,int(eleven)*10,int(twelve)*10,int(thirteen)*10,int(fourteen)*10], 'B' : [int(fifteen)*10,int(sixteen)*10,int(seventeen)*10,int(eightteen)*10,int(nineteen)*10,int(twenty)*10,int(twenty_one)*10,int(twenty_two)*10,int(twenty_three)*10,int(twenty_four)*10,int(twenty_five)*10,int(twenty_six)*10,int(twenty_seven)*10,int(twenty_eight)*10]})
 


df['total'] = df['A'] + df['B']
df['A_percent'] = round(df['A'] / df['total'] * 100, 1)
df['B_percent'] = round(df['B']/ df['total']*100, 1)


fig, ax = plt.subplots(figsize=(10,8))

# bar 그리기
ax.barh(df['MBTI'], -df['A'], color = 'r')
ax.barh(df['MBTI'], df['B'], color = 'b')

# 역순으로 표시
plt.gca().invert_yaxis()

plt.yticks(df['MBTI'])

plt.xticks([-100,-50,0,50,100],('100','50','0','50','100'))

plt.ylabel('MBTI')
plt.xlabel('PERCENT')

#plt.xlim([-100,100])
#택스트 지정

ax.text(-85, df['MBTI'][0],'E '+ str(df['A_percent'][0]) + '%', fontsize = 20,  color = 'black', fontweight='bold')
ax.text(60, df['MBTI'][0], 'I '+str(df['B_percent'][0]) + '%', fontsize = 20,  color = 'black', fontweight='bold')

ax.text(-85, df['MBTI'][1],'S '+ str(df['A_percent'][1]) + '%', fontsize = 20, color = 'black', fontweight='bold')
ax.text(60, df['MBTI'][1], 'N '+str(df['B_percent'][1]) + '%', fontsize = 20,  color = 'black', fontweight='bold')

ax.text(-85, df['MBTI'][2],'T '+ str(df['A_percent'][2]) + '%', fontsize = 20,  color = 'black', fontweight='bold')
ax.text(60, df['MBTI'][2], 'F '+str(df['B_percent'][2]) + '%', fontsize = 20,  color = 'black', fontweight='bold')

ax.text(-85, df['MBTI'][3],'J '+ str(df['A_percent'][3]) + '%', fontsize = 20,  color = 'black', fontweight='bold')
ax.text(60, df['MBTI'][3], 'P '+str(df['B_percent'][3]) + '%', fontsize = 20,  color = 'black', fontweight='bold')


fig
    </py-script>
<script>
	function goBack(){
		location.href = '/register/finalLogin' ;
	}
</script>
  </body>
</html>